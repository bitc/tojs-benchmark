var g=function(){function a(e,a,c){this.i=e;this.x=a;this.y=c}a.prototype.g=function(){return this.x};a.prototype.h=function(){return this.y};return a}(),k=function(){function a(a,b,c,d,f,h){this.i=a;this.color=b;this.c=c;this.f=d;this.w=c-f;this.A=d-h}a.prototype.g=function(){return this.c};a.prototype.h=function(){return this.f};a.prototype.step=function(a,b){this.D(a);for(var c=b.length,d=0;d<c;++d)this.B(b[d])};a.prototype.D=function(a){var b=(a.o*this.c/a.s|0)-(a.u*this.w/a.v|0);a=(a.o*this.f/
a.s|0)-(a.u*this.A/a.v|0)+a.C;this.w=this.c;this.A=this.f;this.c=b;this.f=a};a.prototype.B=function(a){var b=this.c-a.g(),c=this.f-a.h(),d=b*b+c*c,f=a.i+this.i;d<f*f&&(d=Math.sqrt(d),this.c=a.g()+(b*f/d|0),this.f=a.h()+(c*f/d|0))};return a}();function l(){}
var m=function(){function a(){this.x=123456789;this.y=362436069;this.z=521288629;this.l=88675123}a.prototype.next=function(){var a=this.x^this.x<<11,b=this.z,c=this.l,a=this.l^this.l>>19^a^a>>8;this.x=this.y;this.y=b;this.z=c;return this.l=a};a.prototype.a=function(a,b){var c=this.next();return a+c%(b-a)};return a}(),q=function(){function a(a,b){this.b=new l;this.b.width=64E4;this.b.height=48E4;this.b.C=80;this.b.o=199;this.b.s=100;this.b.u=99;this.b.v=100;var c=new m;this.m=[];for(var d=0;d<a;++d)this.m.push(n(c));
this.j=[];for(d=0;d<b;++d)this.j.push(p(c))}a.prototype.step=function(){for(var a=this.j.length,b=0;b<a;++b)this.j[b].step(this.b,this.m)};return a}();function p(a){var e=a.a(2E3,5E3),b=a.a(128,255),c=a.a(0,64E4),d=a.a(0,1E5),f=a.a(-2E3,2E3);a=a.a(-2E3,0);return new k(e,b,c,d,f,a)}function n(a){var e=a.a(1E4,5E4),b=a.a(0,64E4);a=a.a(1E5,48E4);return new g(e,b,a)}
function r(a,e){a.clearRect(0,0,640,480);e.m.forEach(function(b){a.beginPath();a.arc(b.g()/1E3,b.h()/1E3,b.i/1E3,0,2*Math.PI,!1);a.fillStyle="rgba(128,128,128,1)";a.fill()});e.j.forEach(function(b){a.beginPath();a.arc(b.g()/1E3,b.h()/1E3,b.i/1E3,0,2*Math.PI,!1);a.fillStyle="rgba(0,"+b.color+",0,1)";a.fill()})}
window.main=function(){function a(){r(b,c);c.step();f--;0>f?alert("Measured milliseconds: "+((new Date).getTime()-d)):window.requestAnimationFrame(a)}var e=document.createElement("canvas");e.width=640;e.height=480;document.body.appendChild(e);var b=e.getContext("2d"),c=new q(global_num_barriers,global_num_particles),d=(new Date).getTime(),f=global_num_frames;a()};
